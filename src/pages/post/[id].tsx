import { GetServerSideProps, GetServerSidePropsContext, InferGetServerSidePropsType } from 'next'
import React, { useEffect } from 'react'
import Head from 'next/head';
import { api } from '~/utils/api'
import MarkdownRenderer from '~/components/MarkdownRenderer';
import { HandThumbUpIcon,ChatBubbleOvalLeftEllipsisIcon , BookmarkIcon,PlayCircleIcon,ShareIcon,EllipsisHorizontalIcon} from '@heroicons/react/24/outline';
export const getServerSideProps: GetServerSideProps = async (context: GetServerSidePropsContext) => {
  let {id} = context.query
  
  return {
    props: {
      id
    }
  }
  
}
const Post = ({id}:InferGetServerSidePropsType<typeof getServerSideProps>) => {
    const post = api.post.getPost.useQuery({id})
    const posts = api.post.getPosts.useQuery()
    useEffect(() => {
      if(posts.data){
        console.log(posts.data)
      }
    })
    

    return (
        <>
          <Head>
            <title>New Post</title>
            <meta name="description" content="Generated by create-t3-app" />
            <link rel="icon" href="/favicon.ico" />
          </Head>
          <main className="flex py-10 px-36 min-h-screen flex-col justify-start items-center bg-gradient-to-b from-[#111827] to-[#15162c]">
            
            {post.data && <>
                            <h1 className='text-5xl font-extrabold text-blue-500 justify-start w-[80%] mt-16 mb-5'>{post.data.title}</h1>
                            <h3 className='text-xl font-semibold justify-start w-[80%] text-white'>Stable WebCrypto, CustomESM, HTTP(S)/1.1 KeepAlive and more!</h3>
                            <div className='flex w-[80%] items-center space-x-3 mt-5 mb-7'>
                              <div className='w-10 h-10 rounded-full bg-white'/>
                              <div className='flex flex-col text-gray-400'>
                                <div className='flex items-center space-x-2'>
                                  <p className='text-sm'>Luna Rojas</p>
                                  <p className='text-sm'>·</p>
                                  <button className='text-sm text-blue-500'>{` Follow`}</button>
                                </div>
                                <div className='flex text-sm font-light space-x-2 items-center'>
                                  <p>4 min read</p>
                                  <p className='text-lg'>·</p>
                                  <p>Mar 22</p>
                                </div>
                              </div>
                            </div>
                            <div className='flex w-[80%] justify-between border-b border-gray-50/20 pb-4'>
                                <div className='flex space-x-5 text-gray-300 '>
                                  <div className='flex space-x-2 items-center'>
                                      <HandThumbUpIcon className='w-5 h-5 text-gray-300'/>
                                      <p>543</p>
                                  </div>
                                  <div className='flex space-x-2 items-center'>
                                      <ChatBubbleOvalLeftEllipsisIcon className='w-5 h-5 text-gray-300'/>
                                      <p>543</p>
                                  </div>
                                </div>
                                <div className='flex items-center space-x-3 text-gray-400'>
                                    <BookmarkIcon className='w-5 h-5'/>
                                    <PlayCircleIcon className='w-5 h-5'/>
                                    <ShareIcon className='w-5 h-5'/>
                                    <EllipsisHorizontalIcon className='w-5 h-5'/>
                                </div>
                            </div>
                            <MarkdownRenderer content={post.data.content} className='mt-10 w-[80%]'/>
                            
                          </>}
          </main>
        </>
      );
}

export default Post